{% extends 'admin_site/layout.html' %}
{% block 'main' %}

<div class="col-lg-8 offset-lg-2 col-md-12">
    <div class="card">
        <div class="card-body">
            <h4 class="card-title">Confirm Deletion of Fee Type</h4>
            
            <p>You are about to permanently delete the following fee type:</p>
            <h5 class="text-center my-3"><em>"{{ object.name|title }}"</em></h5>

            {% if object.assignments.exists %}
                 <div class="alert alert-danger">
                    <strong>Warning:</strong> This fee type is currently used in one or more fee structures. Deleting it is not allowed as it would corrupt your financial records. Please remove it from all fee structures before attempting to delete it.
                </div>
            {% else %}
                <div class="alert alert-warning">
                    <strong>Warning:</strong> This action is permanent and cannot be undone.
                </div>
            {% endif %}
            
            <p>Are you sure you want to proceed?</p>

            <form style="display:inline" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger" {% if object.assignments.exists %}disabled{% endif %}>Yes, Delete</button>
                <a class="btn btn-secondary" href="{% url 'finance_fee_list' %}">Cancel</a>
            </form>
        </div>
    </div>
</div>
{% endblock %}

